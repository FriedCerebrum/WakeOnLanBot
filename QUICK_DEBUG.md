# Быстрая диагностика пустых логов

## Что изменилось

Добавил **максимально раннее логирование** через `println!` и **диагностический wrapper** в Dockerfile.

## Быстрый тест

```bash
# Пересобрать и запустить
docker-compose down
docker-compose build --no-cache
docker-compose up -d

# Смотреть логи в реальном времени
docker logs -f tg-server-manager
```

## Что вы должны увидеть

### Если .env файл НЕ подхватывается:
```
=== ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ ===
RUST_LOG=debug
=== КОНЕЦ ПЕРЕМЕННЫХ ===
=== ЗАПУСК ПРИЛОЖЕНИЯ ===
=== СТАРТ ПРИЛОЖЕНИЯ ===
=== ФУНКЦИЯ RUN ЗАПУЩЕНА ===
=== ЛОГГЕР ИНИЦИАЛИЗИРОВАН ===
=== НАЧИНАЕМ ЧТЕНИЕ КОНФИГУРАЦИИ ===
=== ВХОД В ФУНКЦИЮ from_env ===
=== ЧИТАЕМ BOT_TOKEN ===
Ошибка запуска: BOT_TOKEN пуст
```

### Если .env файл подхватывается правильно:
```
=== ПЕРЕМЕННЫЕ ОКРУЖЕНИЯ ===
ALLOWED_USERS=758356348,660172337
BOT_TOKEN=8154381570:AAHErn6AJ6xu3Sb7Vnx1EeI1WqmwuFd-tHU
ROUTER_SSH_HOST=localhost
ROUTER_SSH_PORT=2223
ROUTER_SSH_USER=root
RUST_LOG=debug
SERVER_MAC=00:9d:d8:aa:64:5a
SERVER_SSH_HOST=localhost
SERVER_SSH_PORT=2222
SERVER_SSH_USER=friedcerebrum
=== КОНЕЦ ПЕРЕМЕННЫХ ===
=== ЗАПУСК ПРИЛОЖЕНИЯ ===
=== СТАРТ ПРИЛОЖЕНИЯ ===
... и далее процесс запуска
```

## Возможные проблемы

### 1. Переменные окружения пусты
**Причина**: .env файл не подхватывается docker-compose

**Решение**: 
- Проверьте что .env файл находится в той же папке что и docker-compose.yml
- Проверьте права доступа: `ls -la .env`

### 2. Видны переменные, но приложение падает
**Причина**: Проблема в коде или с токеном бота

**Диагностика**: Смотрите на каком этапе останавливаются логи

### 3. Вообще ничего не видно
**Причина**: Контейнер не запускается или падает мгновенно

**Решение**: 
```bash
# Попробуйте запустить напрямую
docker run --env-file .env -v $(pwd)/keys:/app/keys wakeonlan_bot-telegram-bot /app/start.sh
```

## Если проблема с .env файлом

Попробуйте временно прописать переменные прямо в docker-compose.yml:

```yaml
environment:
  - BOT_TOKEN=8154381570:AAHErn6AJ6xu3Sb7Vnx1EeI1WqmwuFd-tHU
  - ALLOWED_USERS=758356348,660172337
  - SERVER_MAC=00:9d:d8:aa:64:5a
  # остальные переменные...
```

Теперь точно будет видно что происходит!